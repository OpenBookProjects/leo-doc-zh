

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Vim Bindings with Leo &mdash; Leo v4.9 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Leo v4.9 documentation" href="index.html" />
    <link rel="next" title="Using ZODB with Leo" href="zodb.html" />
    <link rel="prev" title="Embedding Leo with the leoBridge module" href="leoBridge.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="zodb.html" title="Using ZODB with Leo"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="leoBridge.html" title="Embedding Leo with the leoBridge module"
             accesskey="P">previous</a> |</li>
        <li><a href="leo_toc.html">Leo v4.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-vim-bindings-with-leo">
<h1><a class="toc-backref" href="#id1">Using Vim Bindings with Leo</a><a class="headerlink" href="#using-vim-bindings-with-leo" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes Leo&#8217;s vim-like bindings, including how to install them.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#using-vim-bindings-with-leo" id="id1">Using Vim Bindings with Leo</a><ul>
<li><a class="reference internal" href="#installing-vim-bindings" id="id2">Installing vim bindings</a></li>
<li><a class="reference internal" href="#general-commands" id="id3">General commands</a></li>
<li><a class="reference internal" href="#body-pane-commands" id="id4">Body pane commands</a></li>
<li><a class="reference internal" href="#outline-commands" id="id5">Outline commands</a></li>
<li><a class="reference internal" href="#commands-not-supported" id="id6">Commands not supported</a></li>
<li><a class="reference internal" href="#avoiding-changes-to-tag-files" id="id7">Avoiding changes to &#8216;tag&#8217; files</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="installing-vim-bindings">
<h2><a class="toc-backref" href="#id2">Installing vim bindings</a><a class="headerlink" href="#installing-vim-bindings" title="Permalink to this headline">¶</a></h2>
<p>Place a copy of the &#8220;&#64;keys Vim bindings&#8221; node and its sub-nodes,
located in the leoSettings.leo file, under the &#8220;&#64;settings&#8221; node
in the myLeoSettings.leo file</p>
<p>The same procedure is performed to update to a new version.</p>
<p>Note: Place any local customized key bindings in a separate
&#8220;&#64;keys My Vi&#8221; node in the myLeoSettings.leo file to prevent
them from being overwritten when updating to a new version.</p>
</div>
<div class="section" id="general-commands">
<h2><a class="toc-backref" href="#id3">General commands</a><a class="headerlink" href="#general-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands are always available.</p>
<p>State change commands:</p>
<div class="highlight-python"><pre>i           Change state to insert from command state
Esc         Change state to command from insert state
Ctrl-[      Same as ESC</pre>
</div>
<p>Save/Exit/Quite commands:</p>
<div class="highlight-python"><pre>:e          Revert
:w&lt;return&gt;  Save '.leo' file
:wq&lt;return&gt; Save '.leo' file and quit Leo
:q&lt;return&gt;  Quit Leo   (Leo will prompt if file not saved)
ZZ          Save leo file and exit</pre>
</div>
<p>Undo/Redo commands:</p>
<div class="highlight-python"><pre>u           Undo previous command
Ctrl-r      Redo previous command</pre>
</div>
<p>Search options:</p>
<div class="highlight-python"><pre>Ctrl-/      Prompt for option to change
            Options:
                a   Search all nodes (also &lt;cr&gt; key)
                h   Toggle headline search
                b   Toggle body search
                m   Toggle marking of nodes (specify sub-option)
                    f   Toggle marking of nodes with found text
                    c   Toggle marking of nodes with changed text
                        (only supported with 'Alt-/', 'Alt-p')
                r   Toggle regex matches
                    ('/' key turns off regex. 'n' key uses regex if turned on)

Note: Whether a search is limited to node's body or the node's sub-outline
      is determined by which pane has focus when search text specified.
      (See "Find text commands:" sub-sections in Outline/Body Pane sections)</pre>
</div>
<p>Miscellaneous commands:</p>
<div class="highlight-python"><pre>Tab         Toggle focus between Outline and Body pane
=           Simulate double-click on current node's icon box
Alt-G       Go to specified line number (relative to external file)
Ctrl-:      Enter Leo's command line</pre>
</div>
</div>
<div class="section" id="body-pane-commands">
<h2><a class="toc-backref" href="#id4">Body pane commands</a><a class="headerlink" href="#body-pane-commands" title="Permalink to this headline">¶</a></h2>
<p>Move cursor commands:</p>
<div class="highlight-python"><pre>h           Go back 1 character
   LtArrow  Mapped to "h" for convenience
j           Go down 1 line
   DnArrow  Mapped to "j" for convenience
k           Go up 1 line
   UpArrow  Mapped to "k" for convenience
l           Go forward 1 character
   RtArrow  Mapped to "l" for convenience

w           Go to beginning of next word
   W        Mapped to "w" until "stop after blank characters" supported
b           Go to beginning of current/previous word
   B        Mapped to "b" until "stop at blank character" supported
e           Go to end of current/next word
   E        Mapped to "e" until "stop at blank character" supported

Note: Move by word commands stop at non-alpha characters

|           Goto beginning of current line
^           Go to 1st non-blank character on current line
$           Goto end of current line

%           Go to matching bracket

(           Go to beginning of current sentence
)           Go to beginning of next sentence
{           Go to beginning of current paragraph
}           Go to beginning of next paragraph

gg          Go to the first line (Cursor at column 1)
G           Go to the last line  (Cursor at column 1)</pre>
</div>
<p>Mark commands:</p>
<div class="highlight-python"><pre>m&lt;label&gt;    Assign cursor location to a single character label
`&lt;label&gt;    Go to location associated with label

  Note: Only character count is tracked. Any inserts or deletes will change mark.
      Mark's are not node specific; `&lt;label&gt; will go to location in current node.</pre>
</div>
<p>Select commands:</p>
<div class="highlight-python"><pre>Ctrl-v      Toggle text select mode (Vim's "visual" mode)
   V        Mapped to 'Ctrl-v' for convenience (Should toggle line select)</pre>
</div>
<p>Insert/substitute commands:</p>
<div class="highlight-python"><pre>a           Insert at cursor
i           Mapped to "a" until "cursor on a character" supported
A           Insert at end of line
I           Insert at first non-space
o           Open new line below current line
O           Open new line above current line
R           Overwrite text
s           Substitute character (Delete character, enter insert state)
S           Substitute line (Delete line, enter insert state)</pre>
</div>
<p>Change commands:</p>
<div class="highlight-python"><pre>C           Change to end of line
cc          Change all of current line
cw          Change to end of word
cb          Change to beginning of word
c)          Delete to end of sentence
c(          Delete to beginning of sentence
c}          Delete to end of paragraph
c{          Delete to beginning of paragraph
c%          Change from current bracket type its matching bracket type
ct&lt;char&gt;    Selects forward to &lt;char&gt; (follow with 'i' to change selection)
cT&lt;char&gt;    Selects backward to &lt;char&gt; (follow with 'i' to change selection)
c&lt;cr&gt;       Change selected text</pre>
</div>
<p>Delete commands:</p>
<div class="highlight-python"><pre>x           Delete next character
delete      Delete next character
D           Delete to the end of the current line
dd          Delete current line
dw          Delete to end of word
db          Delete to beginning of word
d)          Delete to end of sentence
d(          Delete to beginning of sentence
d}          Delete to end of paragraph
d{          Delete to start of paragraph
d%          Delete from current bracket type to its apposing bracket
dt&lt;ch&gt;      Delete to character (not limited to current line)
d&lt;cr&gt;       Delete selected text

J           Join next line to end of current line (deletes carriage return)</pre>
</div>
<p>Yank text commands:</p>
<div class="highlight-python"><pre>Y           Yank to end of line
yy          Yank line
yw          Yank to beginning of next word
yb          Yank to beginning of current word
y)          Yank to end of sentence
y(          Yank to beginning of sentence
y}          Yank to end of paragraph
y{          Yank to beginning of paragraph
y%          Yank from current bracket type to its opposing bracket
yt&lt;char&gt;    Select forward to &lt;char&gt;  (use 'y&lt;cr&gt;' to yank selection)
yT&lt;char&gt;    Select backward to &lt;char&gt; (use 'y&lt;cr&gt;' to yank selection)
y&lt;cr&gt;       Yank selected text (Vim uses 'y' in visual mode)</pre>
</div>
<p>Find character commands:</p>
<div class="highlight-python"><pre>f           Find next occurrence of user specified character
F           Find previous occurrence of user specified character</pre>
</div>
<p>Find text commands:</p>
<div class="highlight-python"><pre>/           Search forward within current node's body text
?           Search backward within current node's body text
n           Find next (same scope, same direction)
N           Find next (same scope, other direction)

Note: See "Search options" in General Commands section to change options.</pre>
</div>
<p>Replace [and find next] commands:</p>
<div class="highlight-python"><pre>Commands using Paste buffer (clipboard)
P           Paste text before cursor.
p           Mapped to "P" until character based cursor supported.
Ctrl-p      Paste then find next match
            Note: Use 'pn' instead of 'Ctrl-p' in headlines (Leo limitation)
                  Command will continue to paste when match no longer found.

Commands prompting for replace string
Note: Scope and direction taken from last use of '/','?' or 'Ctrl-/'(scope only)
Alt-/       Prompt for search &amp; replace string
Alt-p       Replace then search (use after Alt-/)
            Note: Works in headlines and body panes.
                  Doesn't paste unless last search found a match.</pre>
</div>
<p>Indent/Unindent line commands:</p>
<div class="highlight-python"><pre>&gt;&gt;          Indent the current line
&gt;)          Indent to the end of sentence
&gt;(          Indent to the beginning of sentence
&gt;}          Indent to the end of paragraph
&gt;{          Indent to the beginning of paragraph
&gt;g          Indent to the start of buffer
&gt;G          Indent to the end of buffer

&lt;&gt;          Unindent the current line
&lt;)          Unindent to the end of sentence
&lt;(          Unindent to the beginning of sentence
&lt;}          Unindent to the end of paragraph
&lt;{          Unindent to the beginning of paragraph
&lt;g          Unindent to the start of buffer
&lt;G          Unindent to the end of buffer</pre>
</div>
<p>Format commands:</p>
<div class="highlight-python"><pre>gqap        Split long line into separate lines
gwap        Split long line into separate lines
gqq         Split long line into separate lines
gww         Split long line into separate lines

Note: 'gwap' and 'gww' should not move cursor but do.</pre>
</div>
<p>Scroll commands:</p>
<div class="highlight-python"><pre>Ctrl-b      Scroll text up by pane's height
Ctrl-f      Scroll text down by pane's height
   Ctrl-y   Mapped to Ctrl-b until scroll up one line is supported
   Ctrl-e   Mapped to Ctrl-f until scroll down one line is supported
   Ctrl-u   Mapped to Ctrl-b until scroll up half a pane height is supported
   Ctrl-d   Mapped to Ctrl-f until scroll down half a pane height is supported</pre>
</div>
<p>Window commands:</p>
<div class="highlight-python"><pre>Ctrl-w s    Open another view into current node's body (Vim: Split window)
   Ctrl-w n Mapped to "Ctrl-w s" (Vim: New buffer in split window)
Ctrl-w w    Switch to next view (Vim: Go to up/left window w/wrapping)
   Ctrl-w p Mapped to "Ctrl-w w" (Vim: Cycle through windows)
   Ctrl-w k Mapped to "Ctrl-w w" (Vim: Go to window above current window)
   Ctrl-w j Mapped to "Ctrl-w w" (Vim: Go to window below current window)
Ctrl-w c    Close current view in body pane (Vim: Close current window)
   Ctrl-w q Mapped to "Ctrl-w c" (Vim: Quit current window)</pre>
</div>
<p>Node commands:</p>
<div class="highlight-python"><pre>Go to another node while focus remains in the body pane.
Ctrl-j      Go to next visible node
Ctrl-k      Go to previous visible node
Ctrl-h      Hide sub-nodes or, if hidden, go up 1 level
Ctrl-l      Display sub-nodes or, if displayed, go down 1 level
   Ctrl-DnArrow    Mapped to "Ctrl-j" for convenience
   Ctrl-UpArrow    Mapped to "Ctrl-k" for convenience
   Ctrl-LtArrow    Mapped to "Ctrl-h" for convenience
   Ctrl-RtArrow    Mapped to "Ctrl-l" for convenience</pre>
</div>
</div>
<div class="section" id="outline-commands">
<h2><a class="toc-backref" href="#id5">Outline commands</a><a class="headerlink" href="#outline-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands are supported when in a headline&#8217;s command mode.</p>
<p>State change commands:</p>
<div class="highlight-python"><pre>Ctrl-i      Change state to command from grayed state
return      Change state to command from insert state
Ctrl-]      Change state to grayed from command state</pre>
</div>
<p>Cursor movement commands:</p>
<div class="highlight-python"><pre>h           Go to previous character
   LtArrow  Mapped to 'h' for convenience
l           Go to next character
   RtArrow  Mapped to "l" for convenience

Note: 'j' and 'k' will scroll the buffer contents up and down;
      leaving the focus in the outline pane.

w           Go to beginning of next word
   W        Mapped to "w" until "stop after blank characters" supported
b           Go to beginning of current/previous word
   B        Mapped to "b" until "stop at blank character" supported
e           Go to end of current/next word
   E        Mapped to "e" until "stop at blank character" supported

Note: Move by word commands stop at non-alpha characters

|           Go to beginning of line
^           Go to beginning of line
$           Go to end of line

%           Go to matching bracket</pre>
</div>
<p>Edit commands:</p>
<div class="highlight-python"><pre>x           Delete next character
delete      Delete next character
dd          kill-line

s           Select current character

v           Toggle text select mode (issue cursor movement commands)
y&lt;return&gt;   Yank selected text

C           Select to end of line (follow with 'i' to change text)
cc          Delete line (follow with 'i' to change text)

D           Select to end of line (follow with 'x' to delete text)
dd          Delete line

Y           Select to end of line (follow with 'y&lt;return&gt;' to yank text)
yy          Select line (follow with 'y&lt;return&gt;' to yank text)</pre>
</div>
<p>Find character commands:</p>
<div class="highlight-python"><pre>f           Find next occurrence of user specified character
F           Find previous occurrence of user specified character</pre>
</div>
<p>Find text commands:</p>
<div class="highlight-python"><pre>/           Search forward within current node and its subnodes
n           Find next (same scope, same direction)
N           Find next (same scope, other direction)

Note: See "Search options" section above to change options using 'Ctrl-/'</pre>
</div>
<p>Replace [and find next] commands:</p>
<div class="highlight-python"><pre>Commands that use Paste buffer (clipboard)
Note: Paste-then-search command not possible in headlines (Use 'pn')
P           Paste text before cursor.
p           Mapped to "P" until character based cursor supported.

Commands that prompt for the replace string
Alt-/       Prompt for search &amp; replace string
Alt-p       Replace then search (use after Alt-/)
            Note: Works in headlines and body panes.
                  Doesn't paste unless last search found a match.</pre>
</div>
<p>Node edit commands:</p>
<div class="highlight-python"><pre>o           Insert node after current node

Ctrl-x      Delete current node
Ctrl-c      Yank current node
Ctrl-v      Paste current node</pre>
</div>
<p>Node goto commands:</p>
<div class="highlight-python"><pre>G           Go to the outline's last node
gg          Go to the outline's first node

Ctrl-j      Go to next visible node
Ctrl-k      Go to previous visible node
Ctrl-h      Hide sub-nodes or, if hidden, go up 1 level
Ctrl-l      Display sub-nodes or, if displayed, go down 1 level

   DnArrow  Mapped to "Ctrl-j" for convenience
   UpArrow  Mapped to "Ctrl-k" for convenience

   Ctrl-DnArrow Mapped to "Ctrl-j" for convenience
   Ctrl-UpArrow Mapped to "Ctrl-k" for convenience
   Ctrl-LtArrow Mapped to "Ctrl-h" for convenience
   Ctrl-RtArrow Mapped to "Ctrl-l" for convenience</pre>
</div>
<p>Node move commands:</p>
<div class="highlight-python"><pre>Ctrl-Shift-k    Move node down
Ctrl-Shift-h    Move node left
Ctrl-Shift-l    Move node right
Ctrl-Shift-j    Move node up

   Ctrl-Shift-DnArrow    Mapped to "Ctrl-Shift-k" for convenience
   Ctrl-Shift-LtArrow    Mapped to "Ctrl-Shift-h" for convenience
   Ctrl-Shift-RtArrow    Mapped to "Ctrl-Shift-l" for convenience
   Ctrl-Shift-UpArrow    Mapped to "Ctrl-Shift-j" for convenience</pre>
</div>
<p>Node mark commands:</p>
<div class="highlight-python"><pre>m           Toggle node mark
Ctrl-m      Go to next marked node
Alt-m       Clear all marked nodes</pre>
</div>
<p>Node clone commands:</p>
<div class="highlight-python"><pre>t           Clone the current node (transclude)
Ctrl-t      Go to next clone of current node</pre>
</div>
<p>Outline scroll commands:</p>
<div class="highlight-python"><pre>Ctrl-y       Scroll outline up one line
Ctrl-e       scroll outline down one line
Ctrl-u       Scroll outline up one half page
Ctrl-d       scroll outline down one half page
Ctrl-b       Scroll outline up one page
Ctrl-f       scroll outline down one page</pre>
</div>
</div>
<div class="section" id="commands-not-supported">
<h2><a class="toc-backref" href="#id6">Commands not supported</a><a class="headerlink" href="#commands-not-supported" title="Permalink to this headline">¶</a></h2>
<p>Notable missing editing commands:</p>
<div class="highlight-python"><pre>t&lt;char&gt;     Move cursor to character before specified character
r           Replace a single character with a single character
0           Go to 1st column in current line (Use '|' instead)
bksp        Move one character to the left
~           Toggle character's case
.           Repeat last editing command
;           Repeat last cursor movement command
&lt;n&gt;&lt;cmd&gt;    Perform command 'n' number of times
&lt;cmd&gt;&lt;n&gt;&lt;object&gt;    Perform the command on the n'th or up to the n'th object</pre>
</div>
<p>Notable missing body pane commands:</p>
<div class="highlight-python"><pre>&lt;num&gt;G      Go to specified line number
z&lt;movement&gt; Slide buffer to put current line at top/middle/bottom of pane
'&lt;command&gt;  Go to line of last edit, jump, ...
`&lt;command&gt;  Go to character of last edit, jump, ...</pre>
</div>
</div>
<div class="section" id="avoiding-changes-to-tag-files">
<h2><a class="toc-backref" href="#id7">Avoiding changes to &#8216;tag&#8217; files</a><a class="headerlink" href="#avoiding-changes-to-tag-files" title="Permalink to this headline">¶</a></h2>
<p>If you use the open-with plugin to open node text in Vim and your Vim&#8217;s &#8220;tag&#8221;
file refers to external files then there is a risk that a external file that is
initially displayed via the &#8220;tag&#8221; command&#8221; in Vim is accidentally edited and
saved from the external Vim editor while your Leo session still contains the
external file&#8217;s original text that may later recreate the original external file
during a Leo save operation (overwriting the changes saved from the Vim editor).</p>
<p>To prevent this problem, modifications to external files can be avoided by using
Vim&#8217;s &#8220;modeline&#8221; feature to disable editing of external files.</p>
<p>Vim&#8217;s &#8220;modeline&#8221; feature scans each loaded buffer for text at the top or bottom
of the file containing &#8221; vim:&#8221; followed by a series of Vim options. The text is
usually embedded within a comment. The following example prevents modifications
to a buffer in a Python file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># vim:noma (A space is required between the &#39;#&#39; and &quot;vim:noma&quot;)</span>
</pre></div>
</div>
<p>If this line is placed in a separate Leo node at the top or bottom of the list
of nodes under a external file node (ex: &#64;file) then any external file saved and
then later loaded into Vim will, by default, not be modifiable. If a derived
file does need to be edited then modifications can be re-enabled on a
file-by-file basis by issuing Vim&#8217;s &#8221;:ma&#8221; command while viewing the derived
file.</p>
<p>The number of lines that Vim checks at the top and bottom of the buffer is
configurable. The following Vim command must be placed in the vimrc file to
allow for Leo&#8217;s trailing sentinel lines:</p>
<div class="highlight-python"><pre>set modelines=8</pre>
</div>
<p>Issue the &#8221;:help modeline&#8221; command within Vim for the more information about
modelines.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="leo_toc.html">
              <img class="logo" src="_static/Leo4-80-border.jpg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="leoBridge.html"
                        title="previous chapter">Embedding Leo with the leoBridge module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="zodb.html"
                        title="next chapter">Using ZODB with Leo</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="zodb.html" title="Using ZODB with Leo"
             >next</a> |</li>
        <li class="right" >
          <a href="leoBridge.html" title="Embedding Leo with the leoBridge module"
             >previous</a> |</li>
        <li><a href="leo_toc.html">Leo v4.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Edward K. Ream.
      Last updated on Oct 28, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>